#pragma checksum "/Users/filippk/projects/Cut/Cut.Web/Views/Plates/CutList.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "7554ca1c0a2c3529ef293a399fc0152e8b9af0ba"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(AspNetCore.Views_Plates_CutList), @"mvc.1.0.view", @"/Views/Plates/CutList.cshtml")]
namespace AspNetCore
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Mvc;
    using Microsoft.AspNetCore.Mvc.Rendering;
    using Microsoft.AspNetCore.Mvc.ViewFeatures;
#nullable restore
#line 1 "/Users/filippk/projects/Cut/Cut.Web/Views/_ViewImports.cshtml"
using Cut.Web;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "/Users/filippk/projects/Cut/Cut.Web/Views/_ViewImports.cshtml"
using Cut.Web.Models;

#line default
#line hidden
#nullable disable
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"7554ca1c0a2c3529ef293a399fc0152e8b9af0ba", @"/Views/Plates/CutList.cshtml")]
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"22000192460ea686adcd2b5ab3c47e52cc9e2b92", @"/Views/_ViewImports.cshtml")]
    public class Views_Plates_CutList : global::Microsoft.AspNetCore.Mvc.Razor.RazorPage<IEnumerable<Cut.Data.PlankSet>>
    {
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
            WriteLiteral("\n");
#nullable restore
#line 3 "/Users/filippk/projects/Cut/Cut.Web/Views/Plates/CutList.cshtml"
  
    ViewData["Title"] = "Карта распила досок";

#line default
#line hidden
#nullable disable
            WriteLiteral("\n<div");
            BeginWriteAttribute("class", " class=\"", 96, "\"", 104, 0);
            EndWriteAttribute();
            WriteLiteral(">\n    <a href=\"#summary\">Сводная таблица</a>\n</div>\n<div class=\"text-center\">\n    <h1 class=\"display-4\">");
#nullable restore
#line 11 "/Users/filippk/projects/Cut/Cut.Web/Views/Plates/CutList.cshtml"
                     Write(ViewData["Title"]);

#line default
#line hidden
#nullable disable
            WriteLiteral("</h1>\n</div>\n<div class=\"text-left\">\n    <div class=\"container\">\n");
#nullable restore
#line 15 "/Users/filippk/projects/Cut/Cut.Web/Views/Plates/CutList.cshtml"
 foreach (var plate in Model) {

#line default
#line hidden
#nullable disable
            WriteLiteral("    <div class=\"row pt-1 pt-1 border-dark\">\n        <div class=\"col border text-center p-3 fs-4 fw-bold\" style=\"background-color: lightslategray; color: whitesmoke;\">\n");
#nullable restore
#line 18 "/Users/filippk/projects/Cut/Cut.Web/Views/Plates/CutList.cshtml"
             if (plate.LibItem != null) {

#line default
#line hidden
#nullable disable
            WriteLiteral("                <span>");
#nullable restore
#line 19 "/Users/filippk/projects/Cut/Cut.Web/Views/Plates/CutList.cshtml"
                 Write(plate.ToString());

#line default
#line hidden
#nullable disable
            WriteLiteral("</span>\n                <span>(");
#nullable restore
#line 20 "/Users/filippk/projects/Cut/Cut.Web/Views/Plates/CutList.cshtml"
                  Write(plate.PlankLength);

#line default
#line hidden
#nullable disable
            WriteLiteral(" мм)</span>\n");
#nullable restore
#line 21 "/Users/filippk/projects/Cut/Cut.Web/Views/Plates/CutList.cshtml"
            }
            else {

#line default
#line hidden
#nullable disable
            WriteLiteral("                <span>");
#nullable restore
#line 23 "/Users/filippk/projects/Cut/Cut.Web/Views/Plates/CutList.cshtml"
                 Write(plate.PlankSize.Width);

#line default
#line hidden
#nullable disable
            WriteLiteral(" x ");
#nullable restore
#line 23 "/Users/filippk/projects/Cut/Cut.Web/Views/Plates/CutList.cshtml"
                                          Write(plate.PlankSize.Height);

#line default
#line hidden
#nullable disable
            WriteLiteral("</span>\n");
#nullable restore
#line 24 "/Users/filippk/projects/Cut/Cut.Web/Views/Plates/CutList.cshtml"
            }

#line default
#line hidden
#nullable disable
            WriteLiteral("        </div>\n    </div>\n");
#nullable restore
#line 27 "/Users/filippk/projects/Cut/Cut.Web/Views/Plates/CutList.cshtml"
     foreach(var p in plate.Planks.OrderBy(p => p.Cuts[0].Name)) {

#line default
#line hidden
#nullable disable
            WriteLiteral("        <div class=\"row pt-1 border-dark\">\n");
#nullable restore
#line 29 "/Users/filippk/projects/Cut/Cut.Web/Views/Plates/CutList.cshtml"
          
            Dictionary<Cut.Data.Cut, int> cutsize = new Dictionary<Cut.Data.Cut, int>();
            
            foreach(var c in p.Cuts) {
                double j = (double)c.Length / plate.PlankLength;
                int k1 = (int)Math.Round(12 * j, MidpointRounding.AwayFromZero);
                if (k1 < 1) k1 = 1;
                cutsize[c] = k1;
            }

            int cl = 0;
            Cut.Data.Settings cfg = (Cut.Data.Settings)ViewData["cfg"];
            
            if (p.GetUnusedLength(cfg.BladeWidth) > cfg.MaxCutOff) cl += 1;

            cl += cutsize.Sum( c => c.Value );

            while (cl > 12) {
                int _max = cutsize.Values.Max();
                //cl = cutsize.Sum( c => c.Value );
                var k = (cl % 2 == 0) ? cutsize.First(c => c.Value == _max ).Key : cutsize.Last(c => c.Value == _max ).Key;
                cutsize[k] = _max - 1;
                cl--;
            }

            if (cl < 12) cl = 12;
        

#line default
#line hidden
#nullable disable
#nullable restore
#line 56 "/Users/filippk/projects/Cut/Cut.Web/Views/Plates/CutList.cshtml"
         foreach (var c in p.Cuts) {
            int k1 = cutsize[c];
            cl -= k1;

#line default
#line hidden
#nullable disable
            WriteLiteral("            <div");
            BeginWriteAttribute("class", " class=\"", 1993, "\"", 2028, 5);
            WriteAttributeValue("", 2001, "col-md-", 2001, 7, true);
#nullable restore
#line 59 "/Users/filippk/projects/Cut/Cut.Web/Views/Plates/CutList.cshtml"
WriteAttributeValue("", 2008, k1, 2008, 3, false);

#line default
#line hidden
#nullable disable
            WriteAttributeValue(" ", 2011, "pr-2", 2012, 5, true);
            WriteAttributeValue(" ", 2016, "fs-4", 2017, 5, true);
            WriteAttributeValue(" ", 2021, "border", 2022, 7, true);
            EndWriteAttribute();
            WriteLiteral("  style=\"background-color: lightgray;\">\n                <span class=\"small\">");
#nullable restore
#line 60 "/Users/filippk/projects/Cut/Cut.Web/Views/Plates/CutList.cshtml"
                               Write(c.Name);

#line default
#line hidden
#nullable disable
            WriteLiteral("</span><br/>\n                <span>(");
#nullable restore
#line 61 "/Users/filippk/projects/Cut/Cut.Web/Views/Plates/CutList.cshtml"
                  Write(c.Length);

#line default
#line hidden
#nullable disable
            WriteLiteral(" мм)</span>\n            </div>\n");
#nullable restore
#line 63 "/Users/filippk/projects/Cut/Cut.Web/Views/Plates/CutList.cshtml"
        }

#line default
#line hidden
#nullable disable
#nullable restore
#line 64 "/Users/filippk/projects/Cut/Cut.Web/Views/Plates/CutList.cshtml"
         if (cl > 0 && p.GetUnusedLength(cfg.BladeWidth) > cfg.MaxCutOff) {
            //int k2 = 12 - cuts;
            //cl = 12 - cuts;
            //cl--;

#line default
#line hidden
#nullable disable
            WriteLiteral("            <div");
            BeginWriteAttribute("class", " class=\"", 2374, "\"", 2439, 8);
            WriteAttributeValue("", 2382, "col-md-", 2382, 7, true);
#nullable restore
#line 68 "/Users/filippk/projects/Cut/Cut.Web/Views/Plates/CutList.cshtml"
WriteAttributeValue("", 2389, cl, 2389, 3, false);

#line default
#line hidden
#nullable disable
            WriteAttributeValue(" ", 2392, "pr-2", 2393, 5, true);
            WriteAttributeValue(" ", 2397, "border", 2398, 7, true);
            WriteAttributeValue(" ", 2404, "fs-5", 2405, 5, true);
            WriteAttributeValue(" ", 2409, "small", 2410, 6, true);
            WriteAttributeValue(" ", 2415, "text-right", 2416, 11, true);
            WriteAttributeValue(" ", 2426, "align-middle", 2427, 13, true);
            EndWriteAttribute();
            WriteLiteral(">\n                (");
#nullable restore
#line 69 "/Users/filippk/projects/Cut/Cut.Web/Views/Plates/CutList.cshtml"
            Write(p.GetUnusedLength(cfg.BladeWidth));

#line default
#line hidden
#nullable disable
            WriteLiteral(" мм)\n            </div>\n");
#nullable restore
#line 71 "/Users/filippk/projects/Cut/Cut.Web/Views/Plates/CutList.cshtml"
        }

#line default
#line hidden
#nullable disable
            WriteLiteral("        </div>\n");
#nullable restore
#line 73 "/Users/filippk/projects/Cut/Cut.Web/Views/Plates/CutList.cshtml"
    }

#line default
#line hidden
#nullable disable
#nullable restore
#line 73 "/Users/filippk/projects/Cut/Cut.Web/Views/Plates/CutList.cshtml"
     
}

#line default
#line hidden
#nullable disable
            WriteLiteral(@"    </div>
</div>

<div class=""text-center""><a name=""summary"" />
    <h3 class=""display-4"">Сводная таблица</h1>
</div>
<div class=""grid"">
    <div class=""row header"">
        <div class=""col-md-8"">Доска</div>
        <div class=""col-md-2 text-right"">Кол-во</div>
        <div class=""col-md-2 text-right"">Объём (факт. / магазин), м3</div>
    </div>
");
#nullable restore
#line 87 "/Users/filippk/projects/Cut/Cut.Web/Views/Plates/CutList.cshtml"
     foreach(var p in Model) {

#line default
#line hidden
#nullable disable
            WriteLiteral("        <div class=\"row\">\n            <div class=\"col-md-8\">");
#nullable restore
#line 89 "/Users/filippk/projects/Cut/Cut.Web/Views/Plates/CutList.cshtml"
                             Write(p.ToString());

#line default
#line hidden
#nullable disable
            WriteLiteral("</div>\n            <div class=\"col-md-2 text-right\">");
#nullable restore
#line 90 "/Users/filippk/projects/Cut/Cut.Web/Views/Plates/CutList.cshtml"
                                        Write(p.Planks.Count);

#line default
#line hidden
#nullable disable
            WriteLiteral("</div>\n            <div class=\"col-md-2 text-right\">");
#nullable restore
#line 91 "/Users/filippk/projects/Cut/Cut.Web/Views/Plates/CutList.cshtml"
                                        Write(string.Format("{0:0.00} / {1:0.00}", (double)p.Volume / Math.Pow(1000, 3), (double)@p.AVolume / Math.Pow(1000, 3)));

#line default
#line hidden
#nullable disable
            WriteLiteral("</div>\n        </div>\n");
#nullable restore
#line 93 "/Users/filippk/projects/Cut/Cut.Web/Views/Plates/CutList.cshtml"
    }

#line default
#line hidden
#nullable disable
            WriteLiteral("</div>\n<div class=\"pt-4\">\n    <div class=\"text-right\">\n        <a href=\"#\"");
            BeginWriteAttribute("class", " class=\"", 3339, "\"", 3347, 0);
            EndWriteAttribute();
            WriteLiteral(">Вверх</a>\n    </div>\n</div>");
        }
        #pragma warning restore 1998
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<IEnumerable<Cut.Data.PlankSet>> Html { get; private set; }
    }
}
#pragma warning restore 1591
